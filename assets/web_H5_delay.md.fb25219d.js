import{_ as n,C as a,c as l,H as o,Q as p,o as t}from"./chunks/framework.3deaef37.js";const C=JSON.parse('{"title":"","description":"","frontmatter":{},"headers":[],"relativePath":"web/H5/delay.md","filePath":"web/H5/delay.md"}'),e={name:"web/H5/delay.md"},c=p(`<blockquote><p>iphone手机H5页面有300毫秒延迟的处理</p></blockquote><h2 id="解释" tabindex="-1">解释 <a class="header-anchor" href="#解释" aria-label="Permalink to &quot;解释&quot;">​</a></h2><div class="info custom-block"><p class="custom-block-title">一、禁用缩放</p><blockquote><p>html声明</p></blockquote><div class="language-html vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">meta</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">name</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;viewport&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">content</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;width=device-width,user-scalable=no&quot;</span><span style="color:#E1E4E8;">&gt;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">&lt;</span><span style="color:#22863A;">meta</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">name</span><span style="color:#24292E;">=</span><span style="color:#032F62;">&quot;viewport&quot;</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">content</span><span style="color:#24292E;">=</span><span style="color:#032F62;">&quot;width=device-width,user-scalable=no&quot;</span><span style="color:#24292E;">&gt;</span></span></code></pre></div></div><div class="info custom-block"><p class="custom-block-title">二、FastClick插件</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#79B8FF;">1.</span><span style="color:#F97583;">n</span><span style="color:#E1E4E8;">pm i FastClick</span></span>
<span class="line"><span style="color:#79B8FF;">2.</span><span style="color:#F97583;">&lt;</span><span style="color:#E1E4E8;">meta name</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&quot;viewport&quot;</span><span style="color:#E1E4E8;"> content</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&quot;width=device-width, initial-scale=1&quot;</span><span style="color:#F97583;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">document.</span><span style="color:#B392F0;">addEventListener</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;DOMContentLoaded&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#F97583;">function</span><span style="color:#E1E4E8;">() {</span></span>
<span class="line"><span style="color:#E1E4E8;">  FastClick.</span><span style="color:#B392F0;">attach</span><span style="color:#E1E4E8;">(document.body);</span></span>
<span class="line"><span style="color:#E1E4E8;">}, </span><span style="color:#79B8FF;">false</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// vue在Mounted声明周期里边声明挂载</span></span>
<span class="line"><span style="color:#E1E4E8;">FastClick.</span><span style="color:#B392F0;">attach</span><span style="color:#E1E4E8;">(document.body);</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#005CC5;">1.</span><span style="color:#D73A49;">n</span><span style="color:#24292E;">pm i FastClick</span></span>
<span class="line"><span style="color:#005CC5;">2.</span><span style="color:#D73A49;">&lt;</span><span style="color:#24292E;">meta name</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&quot;viewport&quot;</span><span style="color:#24292E;"> content</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&quot;width=device-width, initial-scale=1&quot;</span><span style="color:#D73A49;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">document.</span><span style="color:#6F42C1;">addEventListener</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;DOMContentLoaded&#39;</span><span style="color:#24292E;">, </span><span style="color:#D73A49;">function</span><span style="color:#24292E;">() {</span></span>
<span class="line"><span style="color:#24292E;">  FastClick.</span><span style="color:#6F42C1;">attach</span><span style="color:#24292E;">(document.body);</span></span>
<span class="line"><span style="color:#24292E;">}, </span><span style="color:#005CC5;">false</span><span style="color:#24292E;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// vue在Mounted声明周期里边声明挂载</span></span>
<span class="line"><span style="color:#24292E;">FastClick.</span><span style="color:#6F42C1;">attach</span><span style="color:#24292E;">(document.body);</span></span></code></pre></div></div><div class="info custom-block"><p class="custom-block-title">三、特殊场景可以用touchstart事件代替click</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;"> </span><span style="color:#FDAEB7;font-style:italic;">@touchstart=&quot;handle(1)&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#FDAEB7;font-style:italic;">@click=&quot;handle(2)&quot;&gt;单机事件&lt;/div&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">function</span><span style="color:#E1E4E8;"> </span><span style="color:#FDAEB7;font-style:italic;">handle(type)</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;">// 这里必须做区分，安卓和iphone在这里区别还是很大的，安卓走click，苹果走touchstart</span></span>
<span class="line"><span style="color:#E1E4E8;">  const phone </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> navigator.userAgent;</span></span>
<span class="line"><span style="color:#E1E4E8;">  const isAndroid </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> phone.</span><span style="color:#B392F0;">indexOf</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;Android&#39;</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">-</span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">||</span><span style="color:#E1E4E8;"> phone.</span><span style="color:#B392F0;">indexOf</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;Adr&#39;</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">-</span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">; </span><span style="color:#6A737D;">//android安卓</span></span>
<span class="line"><span style="color:#E1E4E8;">  const isiOS </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">!!</span><span style="color:#E1E4E8;">phone.</span><span style="color:#B392F0;">match</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">/</span><span style="color:#DBEDFF;">(i</span><span style="color:#79B8FF;">[</span><span style="color:#F97583;">^</span><span style="color:#79B8FF;">;]</span><span style="color:#F97583;">+</span><span style="color:#DBEDFF;">;( U;)</span><span style="color:#F97583;">?</span><span style="color:#DBEDFF;"> CPU</span><span style="color:#79B8FF;">.</span><span style="color:#F97583;">+</span><span style="color:#DBEDFF;">Mac OS X/); </span><span style="color:#9ECBFF;">/</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">ios苹果</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">if</span><span style="color:#E1E4E8;">(isAndroid </span><span style="color:#F97583;">&amp;&amp;</span><span style="color:#E1E4E8;"> type </span><span style="color:#F97583;">===</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">    return</span></span>
<span class="line"><span style="color:#E1E4E8;">  },</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">if</span><span style="color:#E1E4E8;">(isiOS </span><span style="color:#F97583;">&amp;&amp;</span><span style="color:#E1E4E8;"> type </span><span style="color:#F97583;">===</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">) {}</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">&lt;</span><span style="color:#22863A;">div</span><span style="color:#24292E;"> </span><span style="color:#B31D28;font-style:italic;">@touchstart=&quot;handle(1)&quot;</span><span style="color:#24292E;"> </span><span style="color:#B31D28;font-style:italic;">@click=&quot;handle(2)&quot;&gt;单机事件&lt;/div&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">function</span><span style="color:#24292E;"> </span><span style="color:#B31D28;font-style:italic;">handle(type)</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6A737D;">// 这里必须做区分，安卓和iphone在这里区别还是很大的，安卓走click，苹果走touchstart</span></span>
<span class="line"><span style="color:#24292E;">  const phone </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> navigator.userAgent;</span></span>
<span class="line"><span style="color:#24292E;">  const isAndroid </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> phone.</span><span style="color:#6F42C1;">indexOf</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;Android&#39;</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">-</span><span style="color:#005CC5;">1</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">||</span><span style="color:#24292E;"> phone.</span><span style="color:#6F42C1;">indexOf</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;Adr&#39;</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">-</span><span style="color:#005CC5;">1</span><span style="color:#24292E;">; </span><span style="color:#6A737D;">//android安卓</span></span>
<span class="line"><span style="color:#24292E;">  const isiOS </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">!!</span><span style="color:#24292E;">phone.</span><span style="color:#6F42C1;">match</span><span style="color:#24292E;">(</span><span style="color:#032F62;">/(i</span><span style="color:#005CC5;">[</span><span style="color:#D73A49;">^</span><span style="color:#005CC5;">;]</span><span style="color:#D73A49;">+</span><span style="color:#032F62;">;( U;)</span><span style="color:#D73A49;">?</span><span style="color:#032F62;"> CPU</span><span style="color:#005CC5;">.</span><span style="color:#D73A49;">+</span><span style="color:#032F62;">Mac OS X/); /</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">ios苹果</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">if</span><span style="color:#24292E;">(isAndroid </span><span style="color:#D73A49;">&amp;&amp;</span><span style="color:#24292E;"> type </span><span style="color:#D73A49;">===</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">2</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">    return</span></span>
<span class="line"><span style="color:#24292E;">  },</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">if</span><span style="color:#24292E;">(isiOS </span><span style="color:#D73A49;">&amp;&amp;</span><span style="color:#24292E;"> type </span><span style="color:#D73A49;">===</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">) {}</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div></div>`,5);function r(y,E,i,d,F,u){const s=a("c-title");return t(),l("div",null,[o(s,{title:"iphone单机事件有300毫秒延迟的处理"}),c])}const m=n(e,[["render",r]]);export{C as __pageData,m as default};
