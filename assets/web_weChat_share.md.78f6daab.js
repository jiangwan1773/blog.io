import{_ as a,C as n,c as p,H as l,Q as o,o as e}from"./chunks/framework.3deaef37.js";const u=JSON.parse('{"title":"","description":"","frontmatter":{},"headers":[],"relativePath":"web/weChat/share.md","filePath":"web/weChat/share.md"}'),c={name:"web/weChat/share.md"},t=o(`<blockquote><p>页面本身的分享方法会覆盖全局的分享方法</p></blockquote><h2 id="解释" tabindex="-1">解释 <a class="header-anchor" href="#解释" aria-label="Permalink to &quot;解释&quot;">​</a></h2><div class="info custom-block"><p class="custom-block-title">一、缺陷 &amp; 思路</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">1.全局添加分享功能，每个子页面都需要有一个分享方法（微信原生Api已经提供）</span></span>
<span class="line"><span style="color:#E1E4E8;">2.页面本身的分享会覆盖全局封装的方法</span></span>
<span class="line"><span style="color:#E1E4E8;">3.支持自定义的显示内容很少（微信小程序本身导致）</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">1.全局添加分享功能，每个子页面都需要有一个分享方法（微信原生Api已经提供）</span></span>
<span class="line"><span style="color:#24292E;">2.页面本身的分享会覆盖全局封装的方法</span></span>
<span class="line"><span style="color:#24292E;">3.支持自定义的显示内容很少（微信小程序本身导致）</span></span></code></pre></div></div><div class="info custom-block"><p class="custom-block-title">二、源代码</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">// 全局分享功能，页面有空的onShareAppMessage()会不生效</span></span>
<span class="line"><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">function</span><span style="color:#E1E4E8;">(){</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">PageTmp</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> Page;</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">Page</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> (</span><span style="color:#FFAB70;">pageConfig</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">// 设置全局默认分享</span></span>
<span class="line"><span style="color:#E1E4E8;">    pageConfig </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> Object.</span><span style="color:#B392F0;">assign</span><span style="color:#E1E4E8;">({</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">onShareAppMessage</span><span style="color:#E1E4E8;">:</span><span style="color:#F97583;">function</span><span style="color:#E1E4E8;"> () {</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">            title:</span><span style="color:#9ECBFF;">&#39;默认文案title&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">            path:</span><span style="color:#9ECBFF;">&#39;默认分享路径+id&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">            imageUrl:</span><span style="color:#9ECBFF;">&#39;默认分享图片&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">        };</span></span>
<span class="line"><span style="color:#E1E4E8;">        }</span></span>
<span class="line"><span style="color:#E1E4E8;">    },pageConfig);</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">PageTmp</span><span style="color:#E1E4E8;">(pageConfig);</span></span>
<span class="line"><span style="color:#E1E4E8;">    };</span></span>
<span class="line"><span style="color:#E1E4E8;">})();</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">// 全局分享功能，页面有空的onShareAppMessage()会不生效</span></span>
<span class="line"><span style="color:#24292E;">(</span><span style="color:#D73A49;">function</span><span style="color:#24292E;">(){</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">PageTmp</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> Page;</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">Page</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> (</span><span style="color:#E36209;">pageConfig</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// 设置全局默认分享</span></span>
<span class="line"><span style="color:#24292E;">    pageConfig </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> Object.</span><span style="color:#6F42C1;">assign</span><span style="color:#24292E;">({</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6F42C1;">onShareAppMessage</span><span style="color:#24292E;">:</span><span style="color:#D73A49;">function</span><span style="color:#24292E;"> () {</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">            title:</span><span style="color:#032F62;">&#39;默认文案title&#39;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">            path:</span><span style="color:#032F62;">&#39;默认分享路径+id&#39;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">            imageUrl:</span><span style="color:#032F62;">&#39;默认分享图片&#39;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">        };</span></span>
<span class="line"><span style="color:#24292E;">        }</span></span>
<span class="line"><span style="color:#24292E;">    },pageConfig);</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">PageTmp</span><span style="color:#24292E;">(pageConfig);</span></span>
<span class="line"><span style="color:#24292E;">    };</span></span>
<span class="line"><span style="color:#24292E;">})();</span></span></code></pre></div></div><div class="info custom-block"><p class="custom-block-title">三、代码截图</p><img style="margin:10px 0;" src="http://www.jwblog.cn/images/pc/code/share.png"><img src="http://www.jwblog.cn/images/pc/code/replaceShare.png"></div>`,5);function r(E,i,y,g,d,h){const s=n("c-title");return e(),p("div",null,[l(s,{title:"微信小程序全局添加分享功能"}),t])}const F=a(c,[["render",r]]);export{u as __pageData,F as default};
