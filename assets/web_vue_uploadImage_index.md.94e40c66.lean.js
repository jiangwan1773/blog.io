import{m}from"./chunks/index.2a594c1f.js";import{_ as B,h as i,C as F,c as v,H as y,w as u,k as e,F as g,D as h,Q as _,o as r,a as d,t as b,e as j,p as I,m as k}from"./chunks/framework.3deaef37.js";const A=["jpg","jpeg","png","gif"],C=".jpg、.jpeg、.png、.gif";function x(){return new Promise((n,a)=>{w({multiple:!0,accept:"image/*",typeArr:A}).then(s=>{L(s,A)?n(s):(m.info(`上传文件类型需满足${C}`),a(`上传文件类型需满足${C}`))}).catch(s=>{a(s)})})}function w(n={}){return new Promise((a,s)=>{const l={accept:"*",typeArr:[],multiple:!1,size:10240,limit:5,...n},t=document.createElement("input");t.type="file",t.multiple=l.multiple,t.accept=l.accept,t.style.width="0",t.style.height="0",document.body.appendChild(t),t.click(),t.oninput=c=>{const p=[...c.target.files];T(p,l).then(()=>{a(p)}).catch(o=>{m.error(o),s(o)})},window.addEventListener("focus",()=>{setTimeout(()=>{t.value||(document.body.removeChild(t),s("用户取消上传"))},500)},{once:!0})})}function L(n,a=[]){const s=Array.from(n);let l=[];s.forEach(p=>{l.push(P(p))});const t=l.filter(p=>a.includes(p));return l.length===t.length}function P(n){var a;return(a=n.name.split(".")[n.name.split(".").length-1])==null?void 0:a.toLowerCase()}function T(n,a){return new Promise((s,l)=>{if(n.length>a.limit)return l(`上传数量超过${a.limit}个`);s("校验通过")})}const D=n=>(I("data-v-5733fa09"),n=n(),k(),n),$=D(()=>e("blockquote",null,[e("p",null,[d("Vue3 + ts函数式封装支持 "),e("code",null,"函数式｜组件"),d(" 两种使用方式")])],-1)),M=D(()=>e("h2",{id:"演示",tabindex:"-1"},[d("演示 "),e("a",{class:"header-anchor",href:"#演示","aria-label":'Permalink to "演示"'},"​")],-1)),V={class:"for-box"},S=["src"],G=_("",4),q=JSON.parse('{"title":"","description":"","frontmatter":{},"headers":[],"relativePath":"web/vue/uploadImage/index.md","filePath":"web/vue/uploadImage/index.md"}'),N={name:"web/vue/uploadImage/index.md"},Y=Object.assign(N,{setup(n){const a=i([]),s=i(!1);function l(){s.value=!0,x().then(c=>{const p=[];c.forEach(o=>{const f=URL.createObjectURL(o);p.push(f)}),a.value=[...a.value,...p]}).finally(()=>{s.value=!1})}function t(){a.value.length=0}return(c,p)=>{const o=F("c-title"),f=F("a-button");return r(),v("div",null,[y(o,{title:"函数式封装上传图片组件"}),$,M,y(f,{type:"primary",onClick:l,loading:s.value,style:{"margin-right":"10px"}},{default:u(()=>[d(b(s.value?"上传中...":"上传"),1)]),_:1},8,["loading"]),y(f,{type:"primary",onClick:t},{default:u(()=>[d("清空图片")]),_:1}),e("div",V,[(r(!0),v(g,null,h(a.value,E=>(r(),v(g,{key:E},[E?(r(),v("img",{key:0,src:E,class:"show-img"},null,8,S)):j("",!0)],64))),128))]),G])}}}),O=B(Y,[["__scopeId","data-v-5733fa09"]]);export{q as __pageData,O as default};
